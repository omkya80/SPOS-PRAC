package ALGO;
import java.util.*;

public class FIFO{

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        System.out.println("FIFO Page Replacement Algorithm");
        System.out.print("Enter number of frames: ");
        int framesCount = sc.nextInt();

        System.out.print("Enter number of pages in reference string: ");
        int n = sc.nextInt();

        int[] pages = new int[n];
        System.out.println("Enter page reference string:");
        for (int i = 0; i < n; i++) {
            pages[i] = sc.nextInt();
        }

        fifo(framesCount, pages);
        sc.close();
    }

    private static void fifo(int framesCount, int[] pages) {
        Set<Integer> frames = new HashSet<>();
        Queue<Integer> queue = new LinkedList<>();
        int faults = 0;

        System.out.println("\nSimulation:\n");

        for (int i = 0; i < pages.length; i++) {
            int page = pages[i];

            System.out.printf("Step %2d â€” Page %d : ", (i + 1), page);

            if (!frames.contains(page)) { // Page Fault
                faults++;
                if (frames.size() < framesCount) {
                    frames.add(page);
                    queue.add(page);
                } else {
                    int toRemove = queue.poll();
                    frames.remove(toRemove);
                    frames.add(page);
                    queue.add(page);
                }
                System.out.print("MISS\tFrames: ");
            } else {
                System.out.print("HIT \tFrames: ");
            }

            // Print current frame contents
            List<Integer> list = new ArrayList<>(queue);
            while (list.size() < framesCount) list.add(null);
            System.out.println(list);
        }

        System.out.println("\nTotal Page Faults: " + faults);
    }
}
